define("saber-widget/Widget",["require","saber-lang/extend","./main","saber-dom","./base/event","./base/state","./base/attribute","./base/dom"],function(require){function t(t){var n,i;for(n in t)if(t.hasOwnProperty(n)){if(i=t[n],/^on[A-Z]/.test(n)&&e(i))this.on(n.charAt(2).toLowerCase()+n.slice(3),i),delete t[n];else if(e(this[n])&&e(i))this[n]=i,delete t[n]}else;return t}function e(t){return"function"==typeof t}var n=require("saber-lang/extend"),i=require("./main"),r=function(t){t=t||{},this.attrs=n({},this.attrs||{},{type:{readOnly:!0,value:this.type},id:{readOnly:!0,getter:function(){return this.id}},main:{readOnly:!0,getter:function(){return this.main}}}),this.states=n({disable:!0},this.states),this.runtime={},this.id=t.id||i.getGUID(),this.main=require("saber-dom").query(t.main),delete t.id,delete t.main,this.initOptions(t),i.add(this),this.addState("init"),this.emit("init")};return r.prototype={constructor:r,type:"Widget",initOptions:function(e){e=t.call(this,e),this.options=n({},e),this.set(this.options)},initDom:function(){},initEvent:function(){},render:function(){var t=this.is("render");if(!t)this.emit("beforerender"),this.initDom(),this.initEvent(),this.get("main").setAttribute(i.getConfig("instanceAttr"),this.get("id")),this.addState("render");if(this.repaint(),!t)this.emit("afterrender");return this},repaint:function(){},dispose:function(){if(!this.is("dispose"))this.emit("beforedispose"),this.disable(),this.runtime=null,this.clearEvents(),i.remove(this),i.disposePlugin(this),this.emit("afterdispose"),this.off(),this.addState("dispose"),this.main.removeAttribute(i.getConfig("instanceAttr")),this.main=null},enable:function(){if(this.is("disable"))this.removeState("disable"),this.emit("enable");return this},disable:function(){if(!this.is("disable"))this.addState("disable"),this.emit("disable");return this},plugin:function(t){return(this.plugins||{})[t]},enablePlugin:function(t,e){return i.enablePlugin(this,t,(this.options.plugin||{})[e||t.toLowerCase()]),this},disablePlugin:function(t){return i.disablePlugin(this,t),this}},n(r.prototype,require("./base/event"),require("./base/state"),require("./base/attribute"),require("./base/dom")),r});