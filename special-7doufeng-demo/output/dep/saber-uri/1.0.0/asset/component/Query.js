define("saber-uri/component/Query",["require","saber-lang/inherits","saber-lang/extend","./Abstract","../util/parse-query","../util/stringify-query"],function(require){function t(t){return"[object Object]"===Object.prototype.toString.call(t)}function e(t){return"string"==typeof t}function n(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;t=t.slice(0),t=t.slice(0),t.sort(),e.sort();for(var n=!0,r=0,i=t.length;n&&i>r;r++)n=t[r]==e[r];return n}function r(e,r){if(!t(e)||!t(r))return!1;var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(var s,a,u=!0,c=0;u&&(s=i[c]);c++){if(!r.hasOwnProperty(s)){u=!1;break}if(a=e[s],Array.isArray(a))u=n(a,r[s]);else u=a==r[s]}return u}function i(t){if(Array.isArray(t))t=t.map(function(t){return decodeURIComponent(t)});else t=decodeURIComponent(t);return t}function o(t,e,n){var r=n[t];if(e=i(e),r){if(!Array.isArray(r))r=[r];if(Array.isArray(e))r=r.concat(e);else r.push(e)}else r=e;return n[t]=r,n}function s(t){t=t||{},c.call(this,t)}var a=require("saber-lang/inherits"),u=require("saber-lang/extend"),c=require("./Abstract"),f=require("../util/parse-query"),l=require("../util/stringify-query"),p="?";return a(s,c),s.prototype.set=function(){if(1===arguments.length){var e=arguments[0];if(t(e)){var n=this.data={};Object.keys(e).forEach(function(t){n[t]=i(e[t])})}else this.data=f(e)}else this.data[arguments[0]]=decodeURIComponent(arguments[1])},s.prototype.get=function(t){return t?this.data[t]:u({},this.data)},s.prototype.toString=function(t){t=t||p;var e=l(this.data);return e?t+e:""},s.prototype.equal=function(t){if(e(t))t=f(t);else if(t instanceof s)t=t.get();return r(this.data,t)},s.prototype.add=function(e,n){var r=this.data;if(t(e))Object.keys(e).forEach(function(t){o(t,e[t],r)});else o(e,n,r);this.data=r},s.prototype.remove=function(t){if(!t)this.data={};else if(this.data.hasOwnProperty(t))delete this.data[t]},s});