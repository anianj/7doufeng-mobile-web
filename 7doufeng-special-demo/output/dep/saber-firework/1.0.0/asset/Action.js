define("saber-firework/Action",["require","saber-lang/inherits","saber-lang/extend","saber-lang/bind","saber-router","./Abstract","./View","./Model"],function(require){function e(e){s.call(this,e),this.init(),this.emit("init")}var t=require("saber-lang/inherits"),n=require("saber-lang/extend"),r=require("saber-lang/bind"),i=require("saber-router"),s=require("./Abstract"),o=require("./View"),a=require("./Model");return t(e,s),e.prototype.init=function(){var e;if(this.view&&this.view.constructor!==Object)e=this.view.constructor;else e=o;if(this.view=new e(this.view),this.model&&this.model.constructor!==Object)e=this.model.constructor;else e=a;this.model=new e(this.model),s.prototype.init.call(this)},e.prototype.redirect=function(e,t,n){i.redirect(e,t,n)},e.prototype.enter=function(e,t,i,s){return this.path=e,this.options=n({},s),this.view.setMain(i),this.emit("enter"),this.model.fetch(t).then(r(this.view.render,this.view))},e.prototype.wakeup=function(e,t,i){return this.path=e,this.options=n({},i),this.emit("wakeup"),this.model.refetch(t).then(r(this.view.wakeup,this.view))},e.prototype.ready=function(){this.emit("ready"),this.view.ready()},e.prototype.complete=function(){this.emit("complete")},e.prototype.leave=function(){this.emit("leave"),this.view.leave(),this.dispose()},e.prototype.sleep=function(){this.emit("sleep"),this.view.sleep()},e.prototype.dispose=function(){this.view.dispose(),this.model.dispose()},e});